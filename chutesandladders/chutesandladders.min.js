var n={SNL_COUNT:10,ANIMATION_SPEED:100,MAX_RANDOM_MOVE_LIMIT:20,chutes:[],ladders:[],cells:[],playerToRoll:0,multiplePlayerCellStyle:"font-size: 10px;line-height: inherit;background:wheat",players:[],moveCount:0,gameLog:null,rollButton:null,winMessage:null,colors:["#89cff0","#ff8c00","#f4c2c2","#fae7b5","#f4bbff","#a3c1ad"],init:function(l){for(n.winMessage=document.getElementById("winMessage"),n.gameLog=document.getElementById("gameLog"),n.rollButton=document.getElementById("roll"),n.cells[0]="",i=1;i<=100;i++)n.cells.push(document.getElementById(i));for(i=0;i<n.SNL_COUNT;i++)n.chutes.push(Math.ceil(97*Math.random())+2),n.ladders.push(Math.ceil(97*Math.random())+2);for(i=0;i<n.SNL_COUNT;i++)n.cells[n.chutes[i]].classList+=" snk",n.cells[n.ladders[i]].classList+=" ldr";for(looper=0;looper<l;looper++)n.players.push(n.getPlayer(looper+"",n.colors[looper]));for(looper=0;looper<n.players.length;looper++)n.moveTo(looper,1),n.addToCell(1,looper);n.rollButton.innerHTML="Roll P"+n.playerToRoll},autoPlay:function(){setInterval(function(){n.rollButton.click()},n.ANIMATION_SPEED)},win:function(l){n.rollButton.disabled=!0,n.winMessage.innerHTML="P"+l+" won!<br> Refresh page to restart",console.log("Total moves: "+n.moveCount),n.winMessage.style="display:block"},addToLog:function(l){n.gameLog.innerHTML+="<br>"+l},getPlayer:function(l,e){return{id:l,color:e,pos:1}},moveTo:function(l,e){if(n.players[l].pos<e)var o=1;else{if(!(n.players[l].pos>e))return void(n.rollButton.disabled=!1);var o=-1}n.rollButton.disabled=!0;var t=setInterval(function(){return playerPosition=n.players[l].pos,1==playerPosition&&o==-1?(n.rollButton.disabled=!1,void clearInterval(t)):100==playerPosition&&1==o?(n.rollButton.disabled=!1,n.win(l),void clearInterval(t)):playerPosition==e?(n.checkCells(l,playerPosition),void clearInterval(t)):(n.deleteFromCell(playerPosition,l),n.addToCell(playerPosition+o,l),playerPosition+=o,void(n.players[l].pos=playerPosition))},n.ANIMATION_SPEED)},addToCell:function(l,e){l<1||l>100||("undefined"==typeof n.cells[l].playersInCell&&(n.cells[l].playersInCell=[]),n.cells[l].playersInCell.push(n.players[e].id),n.cells[l].playersInCell.length>1?n.cells[l].style=n.multiplePlayerCellStyle:n.cells[l].style="background:"+n.players[e].color,n.updateCell(l))},deleteFromCell:function(l,e){l<1||l>100||"undefined"!=typeof n.cells[l].playersInCell&&(n.cells[l].playersInCell.splice(n.cells[l].playersInCell.indexOf(n.players[e].id),1),1==n.cells[l].playersInCell.length?n.cells[l].style="background:"+n.players[n.cells[l].playersInCell[0]].color:n.cells[l].playersInCell.length>1?n.cells[l].style=n.multiplePlayerCellStyle:n.cells[l].style="",n.updateCell(l))},updateCell:function(l){"undefined"==typeof n.cells[l].playersInCell?n.cells[l].innerHTML=n.cells[l].id:n.cells[l].playersInCell.length>0?n.cells[l].innerHTML="P"+n.cells[l].playersInCell.join():n.cells[l].innerHTML=n.cells[l].id},checkCells:function(l,e){n.ladders.indexOf(e)!=-1?(n.addToLog("P"+n.playerToRoll+" hit a ladder at "+e+" !"),n.addToLog("Moving.."),n.moveTo(l,e+(Math.floor(Math.random()*n.MAX_RANDOM_MOVE_LIMIT)+1))):n.chutes.indexOf(e)!=-1?(n.addToLog("P"+n.playerToRoll+" hit a chute at "+e+" !"),n.addToLog("Moving.."),n.moveTo(l,e-(Math.floor(Math.random()*n.MAX_RANDOM_MOVE_LIMIT)+1))):(n.rollButton.disabled=!1,n.players[l].pos=e)},rollDice:function(){n.moveCount+=1,n.rollButton.disabled=!0,n.gameLog.innerHTML="";var l=Math.ceil(6*Math.random());n.addToLog("P"+n.playerToRoll+" rolled: "+l+" !"),n.addToLog("Moving.."),n.moveTo(n.playerToRoll,n.players[n.playerToRoll].pos+l),n.playerToRoll=(n.playerToRoll+1)%n.players.length,n.rollButton.innerHTML="Roll P"+n.playerToRoll}};document.getElementById("startButton").addEventListener("click",function(){var l=parseInt(document.getElementById("numberOfPlayers").value);"number"!=typeof l&&(l=2),n.init(document.getElementById("numberOfPlayers").value),document.getElementById("startingSettings").style="display:none;",document.getElementById("gameArea").style=""});
